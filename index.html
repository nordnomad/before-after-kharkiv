<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Харьков в 1942 и сейчас</title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
          integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
          crossorigin="anonymous"/>
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
            integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
            crossorigin="anonymous"></script>

    <script src="https://unpkg.com/leaflet.tilelayer.fallback@1.0.4/dist/leaflet.tilelayer.fallback.js"
            crossorigin="anonymous"></script>

    <link rel="stylesheet" type="text/css" href="css/main.css"/>
    <script type="text/javascript" src="js/main.js"></script>
    <script type="text/javascript" src="js/geo.js"></script>

    <script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>

    <script type="text/javascript" src="js/before-after.js"></script>

    <script type="text/javascript" src="js/L.Map.Sync.js"></script>

    <link rel="stylesheet" href="css/icomoon-style.css">
    <link rel="stylesheet" href="css/L.Icon.Pulse.css" type='text/css'/>
    <script src="js/L.Icon.Pulse.js"></script>

    <link rel="stylesheet" href="css/L.Control.Locate.css" />
    <script type="text/javascript" src="js/L.Control.Locate.js"></script>

    <script type="text/javascript" src="js/leaflet.social.js"></script>
    <script type="text/javascript" src="js/control.bar.js"></script>
</head>
<body>

<div id="container" class="show-intro">
    <div id="intro">
        <h1>Харьков</h1>
        <p>в 1942 и сегодня</p>
        <a href="javascript:;" id="button-explore">
            <i class="icon-map-o"></i> Исследовать
        </a>
        <a href="javascript:;" id="button-start">
            Пройти тур <i class="icon-map-signs"></i>
        </a>
    </div>
    <div id="map-base"></div>
    <div class="cd-panel from-left before">
        <header class="cd-panel-header">
            <h1 id="before-title">
                <!-- Title of selected point -->
            </h1>
            <a href="#0" class="cd-panel-close">Close</a>
        </header>

        <div class="content" id="content-1942">
            <div class="content-wrapper">
                <h2 id="content-title-1942"></h2>
                <div class="content-image front">
                    <img id="content-img-1942" src="">
                </div>
                <div class="content-text back">
                    <p id="content-description-1942"></p>
                </div>
                <div class="nav">
                    <div class="col2 col2left">
                        <a href="javascript:;" id="goto-back" class="goto goto-red">
                            <i class="icon-arrow-left2"></i> Назад
                        </a>
                    </div>
                    <div class="col2 col2right">
                        <a href="javascript:;" id="goto-2015" class="goto goto-red">
                            2015
                            <i class="icon-arrow-right2"></i>
                        </a>
                    </div>
                </div>
                <a href="javascript:;" class="goto goto-explore" title="Исследовать">
                    <i class="icon-cross"></i>
                </a>
            </div>
        </div>
    </div>
    <div id="map-clip">
        <div id="map-clip-inner">
            <div id="map-overlay"></div>
            <div class="content" id="content-2015">
                <div class="content-wrapper">
                    <h2 id="content-title-2015"></h2>
                        <div class="content-image">
                            <img id="content-img-2015" src="">
                        </div>
                        <div class="content-text">
                            <p id="content-description-2015"></p>
                        </div>
                    <div class="nav">
                        <div class="col2 col2left">
                            <a href="javascript:;" id="goto-1942" class="goto goto-red">
                                <i class="icon-arrow-left2"></i>
                                1942
                            </a>
                        </div>
                        <div class="col2 col2right">
                            <a href="javascript:;" id="goto-next" class="goto goto-red">
                                Вперед
                                <i class="icon-arrow-right2"></i>
                            </a>
                        </div>
                    </div>
                    <a href="javascript:;" class="goto goto-explore" title="Исследовать">
                        <i class="icon-cross"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div id="control-slider">
        <i class="icon-arrow-left2"></i>
        <i class="icon-arrow-right2"></i>
    </div>
</div>
<script>
    var after;
    var before;

    document.addEventListener("DOMContentLoaded", function() {
        var beforeLayerUrl = 'https://17200.selcdn.ru/AerialWWII/Z{z}/{y}/{x}.jpg';
        before = buildMap('map-base', beforeLayerUrl, false);
        L.tileLayer.fallback(beforeLayerUrl, {minNativeZoom: 13}).addTo(before);

        var afterLayerUrl = 'https://api.tiles.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}.png?access_token=';
        var accessKey = 'pk.eyJ1Ijoibm9yZG5vbWFkIiwiYSI6ImNrMjA3emg0cjEyc2YzY2w4MmltYWxqeGMifQ.jGJYfQpF8De6ZhhafArC1Q';
        after = buildMap('map-overlay', afterLayerUrl + accessKey, true);

        var container = document.querySelector('#container');
        var containerClasses = container.classList;

        $('#container').beforeAfter();

        before.sync(after);
        after.sync(before);

        initContentPanel();

        applySmallStyle(containerClasses);

        window.onresize = function(event) {
            applySmallStyle(containerClasses);
        };

        document.querySelector('#button-explore').addEventListener('click', function (event) {
            containerClasses.remove('show-intro');
            showMapControls();
        }, false);
        document.querySelector('#button-start').addEventListener('click', function (event) {
            containerClasses.remove('show-intro');
            markerClickListener(geoJson[0], false);
        }, false);

        $('.leaflet-control-zoom-in').addClass('icon-plus');
        $('.leaflet-control-zoom-out').addClass('icon-minus');
    });
</script>
</body>
</html>